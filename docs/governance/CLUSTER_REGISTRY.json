{
  "$schema_note": "Machine-readable registry of script clusters for Phase 4 consolidation.",
  "$version": "1.1.0",
  "$generated": "2026-02-04",
  "$source": "Complete analysis of scripts/ directory (101 scripts)",
  "clusters": [
    {
      "cluster_id": "ingestion",
      "description": "Content ingestion pipelines for knowledge base population",
      "label": "PRODUCT_PIPELINE",
      "owned_by": "ISA Core Team",
      "entrypoints": [
        ".github/workflows/generate-embeddings.yml",
        "scripts/run-all-ingestion.ts"
      ],
      "canonical_scripts": [
        "scripts/ingest_gs1nl_content.py",
        "scripts/ingest_gs1nl_sector_content.py",
        "scripts/ingest_sustainability_content.py",
        "scripts/ingest_fashion_dpp_content.py",
        "scripts/run-all-ingestion.ts"
      ],
      "deprecated_scripts": [
        "scripts/run-first-ingestion.mjs",
        "scripts/legacy/test-ingest-02.ts",
        "scripts/ingest-dpp-content.cjs",
        "scripts/ingest-dpp-granular.cjs",
        "scripts/fix_ingest_missing_files.sh",
        "scripts/test-gate13-ingestion.cjs"
      ],
      "inputs": ["data/standards/gs1-nl/**/*.xlsx", "data/standards/sustainability/**/*.json"],
      "outputs": ["Database: knowledge_items table"],
      "env_interfaces": ["DATABASE_URL"],
      "quality_gates": ["scripts/validate_gs1_efrag_catalogue.py"],
      "run_config_refs": []
    },
    {
      "cluster_id": "embeddings",
      "description": "Vector embedding generation for semantic search",
      "label": "PRODUCT_PIPELINE",
      "owned_by": "ISA Core Team",
      "entrypoints": [
        ".github/workflows/generate-embeddings.yml",
        ".github/workflows/generate-embeddings-optimized.yml",
        "scripts/cron-generate-embeddings.sh"
      ],
      "canonical_scripts": [
        "scripts/generate_embeddings_standalone.ts",
        "scripts/cron-generate-embeddings.sh"
      ],
      "deprecated_scripts": [
        "scripts/standalone-embedding-gen.ts",
        "scripts/fix-empty-embeddings.cjs",
        "scripts/test-batch-embedding.cjs",
        "scripts/test-vector-search.cjs"
      ],
      "inputs": ["Database: knowledge_items table"],
      "outputs": ["Database: embeddings table"],
      "env_interfaces": ["DATABASE_URL", "OPENAI_API_KEY"],
      "quality_gates": [],
      "run_config_refs": []
    },
    {
      "cluster_id": "catalogue",
      "description": "GS1/EFRAG catalogue generation and validation",
      "label": "PRODUCT_PIPELINE",
      "owned_by": "ISA Core Team",
      "entrypoints": [
        ".github/workflows/catalogue-checks.yml",
        ".github/workflows/update-gs1-efrag-catalogue.yml"
      ],
      "canonical_scripts": [
        "scripts/isa-catalogue/generate_legacy_artefacts.py",
        "scripts/isa-catalogue/export_run_to_repo.sh",
        "scripts/isa-catalogue/iron_gate_catalogue.sh",
        "scripts/validate_gs1_efrag_catalogue.py",
        "scripts/verify_catalogue_entrypoints.py"
      ],
      "deprecated_scripts": [
        "scripts/proto_crawl_catalogue.py"
      ],
      "inputs": ["Database: knowledge_items table", "data/standards/**/*"],
      "outputs": ["docs/evidence/_generated/GS1_EFRAG_CATALOGUE.json", "docs/evidence/_generated/GS1_EFRAG_CATALOGUE.csv"],
      "env_interfaces": ["DATABASE_URL"],
      "quality_gates": ["scripts/validate_gs1_efrag_catalogue.py", "scripts/isa-catalogue/iron_gate_catalogue.sh"],
      "run_config_refs": []
    },
    {
      "cluster_id": "parsing",
      "description": "GS1 NL datamodel parsing from Excel sources",
      "label": "DEV_TOOL",
      "owned_by": "ISA Core Team",
      "entrypoints": [],
      "canonical_scripts": [
        "scripts/parse_gs1nl_datamodel.py"
      ],
      "deprecated_scripts": [
        "scripts/parse_gs1nl_diy_datamodel.py",
        "scripts/parse_gs1nl_healthcare_datamodel.py"
      ],
      "inputs": ["data/standards/gs1-nl/**/*.xlsx"],
      "outputs": ["Parsed JSON structures"],
      "env_interfaces": [],
      "quality_gates": [],
      "run_config_refs": []
    },
    {
      "cluster_id": "advisory",
      "description": "ESG advisory report generation",
      "label": "PRODUCT_PIPELINE",
      "owned_by": "ISA Core Team",
      "entrypoints": [],
      "canonical_scripts": [
        "scripts/extract_advisory_v1.py",
        "scripts/validate_advisory.py",
        "scripts/validate_advisory_schema.cjs"
      ],
      "deprecated_scripts": [
        "scripts/advisory/extract_esg_requirements.py",
        "scripts/advisory/generate_report_data.ts",
        "scripts/generate_advisory_summary.py",
        "scripts/patch_advisory_v1_provenance.py",
        "scripts/canonicalize_advisory.cjs",
        "scripts/compute_advisory_diff.cjs",
        "scripts/validate-esg-artefacts.mjs",
        "scripts/import-esg-artefacts.mjs"
      ],
      "inputs": ["data/standards/**/*", "Database: knowledge_items table"],
      "outputs": ["data/advisories/ISA_ADVISORY_v1.0.json"],
      "env_interfaces": ["DATABASE_URL"],
      "quality_gates": ["scripts/validate_advisory.py", "scripts/validate_advisory_schema.cjs"],
      "run_config_refs": []
    },
    {
      "cluster_id": "iron-protocol",
      "description": "IRON Protocol compliance gates and context management",
      "label": "PRODUCT_PIPELINE",
      "owned_by": "ISA Core Team",
      "entrypoints": [".github/workflows/iron-gate.yml"],
      "canonical_scripts": [
        "scripts/iron-context.sh",
        "scripts/iron-inventory.sh"
      ],
      "deprecated_scripts": [],
      "inputs": ["isa.inventory.json", "Repository state"],
      "outputs": ["CI gate pass/fail"],
      "env_interfaces": [],
      "quality_gates": [],
      "run_config_refs": []
    },
    {
      "cluster_id": "datasets",
      "description": "Dataset inventory and registry management",
      "label": "DEV_TOOL",
      "owned_by": "ISA Core Team",
      "entrypoints": [],
      "canonical_scripts": [
        "scripts/datasets/build_registry.py",
        "scripts/datasets/generate_inventory.py"
      ],
      "deprecated_scripts": [
        "scripts/datasets/analyze_inventory.py",
        "scripts/datasets/expand_registry.py",
        "scripts/datasets/ingest-gs1-eu-pcf.mjs"
      ],
      "inputs": ["data/**/*"],
      "outputs": ["data/metadata/dataset_registry.json", "docs/INVENTORY.csv"],
      "env_interfaces": [],
      "quality_gates": [],
      "run_config_refs": []
    },
    {
      "cluster_id": "phase3-synthesis",
      "description": "Canonical specification synthesis from documentation",
      "label": "PRODUCT_PIPELINE",
      "owned_by": "ISA Core Team",
      "entrypoints": [],
      "canonical_scripts": [
        "scripts/phase3_synthesis.py",
        "scripts/validate_specs.py",
        "scripts/validate_cluster_registry.py"
      ],
      "deprecated_scripts": [
        "scripts/run-pipeline-phase3.mjs",
        "scripts/test-phase3-sources.mjs"
      ],
      "inputs": ["outputs/document_index.json", "outputs/cluster_map.json", "outputs/authority_candidates.json"],
      "outputs": ["docs/spec/*.md", "docs/spec/TRACEABILITY_MATRIX.csv"],
      "env_interfaces": ["ISA_REPO_ROOT"],
      "quality_gates": ["scripts/validate_specs.py", "scripts/validate_cluster_registry.py"],
      "run_config_refs": ["docs/spec/RUN_CONFIG.json"]
    },
    {
      "cluster_id": "esrs",
      "description": "ESRS (European Sustainability Reporting Standards) data handling",
      "label": "PRODUCT_PIPELINE",
      "owned_by": "ISA Core Team",
      "entrypoints": [],
      "canonical_scripts": [
        "scripts/run-esrs-ingest.ts",
        "scripts/create-esrs-tables.ts"
      ],
      "deprecated_scripts": [
        "scripts/drop-esrs-tables.ts",
        "scripts/count-esrs-rows.ts"
      ],
      "inputs": ["data/standards/esrs/**/*"],
      "outputs": ["Database: esrs_* tables"],
      "env_interfaces": ["DATABASE_URL"],
      "quality_gates": [],
      "run_config_refs": []
    },
    {
      "cluster_id": "ci-testing",
      "description": "CI and integration testing scripts",
      "label": "DEV_TOOL",
      "owned_by": "ISA Core Team",
      "entrypoints": [],
      "canonical_scripts": [
        "scripts/run-ci-tests.sh",
        "scripts/run-integration-tests.sh",
        "scripts/run-unit-tests.sh"
      ],
      "deprecated_scripts": [
        "scripts/test-gate1-corpus-governance.cjs",
        "scripts/test-gate12-rag-tracing.cjs"
      ],
      "inputs": [],
      "outputs": ["Test results"],
      "env_interfaces": ["DATABASE_URL"],
      "quality_gates": [],
      "run_config_refs": []
    },
    {
      "cluster_id": "rag-evaluation",
      "description": "RAG (Retrieval-Augmented Generation) evaluation and tracing",
      "label": "DEV_TOOL",
      "owned_by": "ISA Core Team",
      "entrypoints": [],
      "canonical_scripts": [
        "scripts/run-rag-evaluation.cjs",
        "scripts/seed-golden-qa-pairs.cjs"
      ],
      "deprecated_scripts": [
        "scripts/analyze-rag-traces.cjs",
        "scripts/debug-eval.cjs",
        "scripts/run-repro-harness.js"
      ],
      "inputs": ["Database: knowledge_items table"],
      "outputs": ["Evaluation metrics"],
      "env_interfaces": ["DATABASE_URL", "OPENAI_API_KEY"],
      "quality_gates": [],
      "run_config_refs": []
    },
    {
      "cluster_id": "eudr-mappings",
      "description": "EUDR (EU Deforestation Regulation) mapping utilities",
      "label": "ONE_OFF_MIGRATION",
      "owned_by": "ISA Core Team",
      "entrypoints": [],
      "canonical_scripts": [],
      "deprecated_scripts": [
        "scripts/find-eudr.mjs",
        "scripts/query-eudr.mjs",
        "scripts/discover-mappings.mjs",
        "scripts/enhance-gs1-mappings.mjs",
        "scripts/enhance-targeted-mappings.mjs"
      ],
      "inputs": ["Database: mappings"],
      "outputs": ["Enhanced mappings"],
      "env_interfaces": ["DATABASE_URL"],
      "quality_gates": [],
      "run_config_refs": []
    },
    {
      "cluster_id": "seeding",
      "description": "Database seeding and data population scripts",
      "label": "ONE_OFF_MIGRATION",
      "owned_by": "ISA Core Team",
      "entrypoints": [],
      "canonical_scripts": [
        "scripts/seed-regulatory-change-log.ts"
      ],
      "deprecated_scripts": [
        "scripts/legacy/seed-dutch-initiatives.mjs",
        "scripts/legacy/seed-esg-data.mjs",
        "scripts/legacy/seed-regulatory-change-log.mjs",
        "scripts/legacy/populate-ask-isa-mappings.mjs",
        "scripts/populate-quick-wins.mjs",
        "scripts/query-ids-for-seed.mjs",
        "scripts/create-dutch-tables.mjs",
        "scripts/backfill-events.mjs",
        "scripts/export-sample-events.mjs"
      ],
      "inputs": ["Seed data"],
      "outputs": ["Database: seeded tables"],
      "env_interfaces": ["DATABASE_URL"],
      "quality_gates": [],
      "run_config_refs": []
    },
    {
      "cluster_id": "legacy",
      "description": "Legacy scripts pending triage or removal",
      "label": "LEGACY_REPLACED",
      "owned_by": "UNKNOWN_OWNER",
      "entrypoints": [],
      "canonical_scripts": [],
      "deprecated_scripts": [
        "scripts/legacy/check-boolean-fields.ts",
        "scripts/legacy/check-db-state.ts",
        "scripts/legacy/check-diy-data.ts",
        "scripts/legacy/check-sectors.ts",
        "scripts/legacy/test-ingest-02.ts",
        "scripts/legacy/test-report.ts",
        "scripts/legacy/check-esrs-columns.mjs",
        "scripts/legacy/check-esrs-count.mjs",
        "scripts/legacy/check-eudr-mappings.mjs",
        "scripts/legacy/check-regulation-ids.mjs"
      ],
      "inputs": [],
      "outputs": [],
      "env_interfaces": [],
      "quality_gates": [],
      "run_config_refs": []
    },
    {
      "cluster_id": "inspection",
      "description": "One-off inspection and debugging scripts",
      "label": "ONE_OFF_MIGRATION",
      "owned_by": "UNKNOWN_OWNER",
      "entrypoints": [],
      "canonical_scripts": [],
      "deprecated_scripts": [
        "scripts/inspect-echo.ts",
        "scripts/inspect-fmcg-file.ts",
        "scripts/inspect-gs1-datamodel.ts",
        "scripts/inspect-validation-rules.ts"
      ],
      "inputs": ["data/standards/gs1-nl/**/*.xlsx"],
      "outputs": ["Console output"],
      "env_interfaces": [],
      "quality_gates": [],
      "run_config_refs": []
    },
    {
      "cluster_id": "utilities",
      "description": "General utility and helper scripts",
      "label": "DEV_TOOL",
      "owned_by": "ISA Core Team",
      "entrypoints": [],
      "canonical_scripts": [
        "scripts/generate-api-docs.ts",
        "scripts/verify-data-files.ts",
        "scripts/check-db-status.ts"
      ],
      "deprecated_scripts": [
        "scripts/generate-cron-config.mjs",
        "scripts/generate-dataset-catalog.py",
        "scripts/extract_ref_gs1_standards.py",
        "scripts/check-new-fields.ts",
        "scripts/analyze-news-data.ts",
        "scripts/analyze-news-quality.ts",
        "scripts/query-key-regulations.ts",
        "scripts/query-key-regulations.mjs",
        "scripts/update-regulation-quality.mjs"
      ],
      "inputs": [],
      "outputs": [],
      "env_interfaces": [],
      "quality_gates": [],
      "run_config_refs": []
    }
  ],
  "orphan_scripts": [],
  "summary": {
    "total_clusters": 16,
    "total_scripts": 102,
    "scripts_in_clusters": 102,
    "orphan_scripts": 0,
    "labels": {
      "PRODUCT_PIPELINE": 8,
      "DEV_TOOL": 5,
      "ONE_OFF_MIGRATION": 2,
      "LEGACY_REPLACED": 1
    }
  }
}
